(this.webpackJsonpfun2build=this.webpackJsonpfun2build||[]).push([[0],{147:function(e,t,n){},157:function(e,t){},159:function(e,t){},207:function(e,t,n){"use strict";n.r(t);var r=n(0),c=n.n(r),o=n(105),i=n.n(o),a=(n(147),n(11)),u=n(79),s=n(40),l=n(4);var j=function(){var e=Object(r.useState)("comment"),t=Object(a.a)(e,2),n=t[0],c=t[1];return Object(l.jsxs)(u.b,{h:"100vh",w:"10rem",bg:"white",color:"blackAlpha.300",flexDir:"column",justify:"space-between",align:"center",children:[Object(l.jsx)(u.b,{justify:"space-around",h:"6rem",w:"100%",fontSize:"4rem",textShadow:"0px 0px 20px #e7e7e7",fontWeight:500,letterSpacing:"-0.3rem",style:{fontVariant:"diagonal-fractions"},children:"S4F"}),Object(l.jsxs)(u.b,{flex:1,w:"100%",fontSize:"1.5rem",paddingRight:"1rem",alignItems:"end",justify:"start",flexDir:"column",children:[Object(l.jsxs)(s.b,{to:"/",onClick:function(){return c("comment")},children:["comment"===n?">":""," \u714e\u86cb\u4f18\u8bc4"]}),Object(l.jsxs)(s.b,{to:"/v2ex/hot",onClick:function(){return c("v2exHot")},children:["v2exHot"===n?">":""," v2ex\u70ed\u699c"]})]}),Object(l.jsx)(u.b,{flex:1,justify:"right"})]})},f=n(21),h=n(102),b=n(33),d=n(39),m=n.n(d),p=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return(new m.a).parseString(e)})).then((function(e){return e.items})).then((function(e){return e.map((function(e){var t=e.contentSnippet.split("\n"),n=Object(a.a)(t,1)[0];return e.module=n,e.contentSnippet=e.contentSnippet.replace(e.module+"\n",""),e}))}))};var x=function(e){var t=e.setActiveComment,n=Object(f.a)(!1),c=Object(a.a)(n,2),o=c[0],i=c[1],s=Object(r.useState)(""),j=Object(a.a)(s,2),d=j[0],m=j[1],x=Object(r.useRef)(),O=function(){var e=Object(b.a)("https://spac4fun.herokuapp.com/jandan/top-comments",p),t=e.data,n=e.error;return{comment:t,isCommentLoading:!n&&!t,isCommentError:n}}(),g=O.comment,v=O.isCommentLoading,w=O.isCommentError;return Object(f.c)({ref:x,handler:function(){i.off(),m("")}}),Object(l.jsx)(u.c,{spacing:4,children:v?Object(l.jsx)(h.a,{mt:"4",noOfLines:4,spacing:"4"}):w||!g?Object(l.jsx)(u.a,{children:" error "}):g.map((function(e){return Object(l.jsxs)(u.d,{onClick:function(){i.on(),m(e.guid),t(e.link.substring(e.link.lastIndexOf("/")))},children:[Object(l.jsxs)(u.e,{color:o!==(e.guid===d)?"white":"blackAlpha.500",children:[e.module," ",e.author,":"]}),Object(l.jsx)(u.e,{color:o!==(e.guid===d)?"white":"blue.900",children:e.contentSnippet})]},e.guid)}))})},O=n(5),g=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return"message"in e?[]:null===e.hot_tucao?e.tucao:e.hot_tucao})).then((function(e){if(e===[])return[];var t=[];return e.forEach((function(n){var r=n.comment_content.match(/tucao-(\d*)/);if(r&&r.length>1){var c,o=Number(r[1]);t.push(o),n.comment_content=n.comment_content.replaceAll(/<a.*>/gm,""),n.comment_reply=null!==(c=e.find((function(e){return e.comment_ID===o})))&&void 0!==c?c:null}})),e=e.filter((function(e){return!t.includes(e.comment_ID)}))}))};var v=function(e){var t=function e(t){var n=t.item;return Object(l.jsxs)(u.a,{paddingLeft:"0.7rem",borderLeftStyle:"solid",borderLeftWidth:"0.5rem",borderLeftColor:"blackAlpha.500",children:[n.comment_reply&&Object(l.jsx)(e,{item:n.comment_reply}),Object(l.jsx)(u.e,{color:"blackAlpha.500",children:n.comment_author}),Object(l.jsx)(u.e,{color:"blue.900",children:n.comment_content})]})},n=function(e){var t=Object(b.a)("https://worker.space4.fun".concat(e),g),n=t.data,r=t.error;return{tucao:n,isTucaoLoading:!r&&!n,isTucaoError:r}}(e.id),r=n.tucao,c=n.isTucaoError,o=n.isTucaoLoading;return c&&console.error(c),Object(l.jsx)(u.c,{spacing:4,children:o?Object(l.jsx)(h.a,{mt:"4",noOfLines:4,spacing:"4"}):c||!r?Object(l.jsx)(u.a,{children:" error "}):r.map((function(e){return Object(l.jsx)(u.d,{children:Object(l.jsx)(t,{item:e})},e.comment_ID.toString())}))})},w=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return(new m.a).parseString(e)})).then((function(e){return e.items})).then((function(e){return e.forEach((function(e){return e.content=e.content.replace("".concat(e.author,": "),"")})),e}))};var y=n(108);var k=function(e){var t=e.setActiveComment,n=e.type,c=Object(f.a)(!1),o=Object(a.a)(c,2),i=o[0],s=o[1],j=Object(r.useState)(""),d=Object(a.a)(j,2),m=d[0],p=d[1],x=Object(r.useRef)(),O=function(e){var t=Object(b.a)("https://spac4fun.herokuapp.com/v2ex/topics/"+e,w),n=t.data,r=t.error;return{v2ex:n,isV2exLoading:!r&&!n,isV2exError:r}}(n),g=O.v2ex,v=O.isV2exLoading,k=O.isV2exError;return Object(f.c)({ref:x,handler:function(){s.off(),p("")}}),Object(l.jsx)(u.c,{spacing:4,children:v?Object(l.jsx)(h.a,{mt:"4",noOfLines:4,spacing:"4"}):k||!g?Object(l.jsx)(u.a,{children:" error "}):g.map((function(e){return Object(l.jsxs)(u.d,{ref:x,onClick:function(){s.on(),p(e.guid),t(e.guid)},children:[Object(l.jsxs)(u.e,{color:i!==(e.guid===m)?"white":"blackAlpha.500",children:[e.title," by  ",e.author]}),Object(l.jsx)(u.a,{color:i!==(e.guid===m)?"white":"blue.900",children:Object(y.a)(e.content)})]},e.guid)}))})},L=n(112),S=function(e){return fetch(e).then((function(e){return e.text()})).then((function(e){return(new m.a).parseString(e)})).then((function(e){return e.items.reverse()})).then((function(e){return e.forEach((function(t){var n=Object(L.a)(t.content.matchAll(/<a.*?>(.*?)<\/a>/gm));if(n.length>0){var r=[];n.forEach((function(t){var n=e.find((function(e){return e.creator===t[1]}));n&&r.push(n)})),t.reply=r}})),e}))};var C=function(e){var t=e.id,n=function e(t){var n=t.item;return Object(l.jsxs)(u.a,{paddingLeft:"0.7rem",borderLeftStyle:"solid",borderLeftWidth:"0.5rem",borderLeftColor:"blackAlpha.500",children:[n.reply&&n.reply.map((function(t){return Object(l.jsx)(e,{item:t},n.guid+t.guid)})),Object(l.jsx)(u.e,{color:"blackAlpha.500",children:n.author}),Object(l.jsx)(u.e,{color:"blue.900",children:n.contentSnippet})]})},r=function(e){var t=Object(b.a)("https://spac4fun.herokuapp.com/v2ex/post/"+e,S),n=t.data,r=t.error;return{v2exPost:n,isV2exPostLoading:!r&&!n,isV2exPostError:r}}(t),c=r.v2exPost,o=r.isV2exPostLoading,i=r.isV2exPostError;return Object(l.jsx)(u.c,{spacing:4,children:o?Object(l.jsx)(h.a,{mt:"4",noOfLines:4,spacing:"4"}):i||!c?Object(l.jsx)(u.a,{children:" error "}):c.map((function(e){return Object(l.jsx)(u.d,{children:Object(l.jsx)(n,{item:e},e.guid)},e.guid)}))})};var A=function(){var e=Object(r.useState)(""),t=Object(a.a)(e,2),n=t[0],c=t[1],o=Object(r.useRef)(),i=Object(r.useRef)(),s=Object(r.useRef)();function h(e){(""===n?i.current:s.current).scrollBy(e.deltaX,e.deltaY)}return Object(f.c)({ref:o,handler:function(){c("")}}),Object(l.jsxs)(u.b,{flexDir:"row",onWheel:h,justify:"center",bg:"white",h:"100vh",children:[Object(l.jsx)(j,{}),Object(l.jsx)(u.b,{justify:"center",align:"stretch",h:"100vh",children:Object(l.jsxs)(u.b,{justify:"center",align:"stretch",ref:o,children:[Object(l.jsx)(u.a,{ref:i,onWheel:""===n?function(e){return e.stopPropagation()}:h,w:"40vw",paddingRight:"1rem",overflow:""!==n?"hidden":"auto",sx:{"::-webkit-scrollbar":{display:"none"}},children:Object(l.jsxs)(O.c,{children:[Object(l.jsx)(O.a,{path:"/",element:Object(l.jsx)(x,{setActiveComment:c})}),Object(l.jsx)(O.a,{path:"/v2ex/hot",element:Object(l.jsx)(k,{setActiveComment:c,type:"hot"})})]})}),Object(l.jsx)(u.a,{ref:s,onWheel:function(e){return e.stopPropagation()},w:"30vw",display:""!==n?"block":"none",overflow:"auto",sx:{"::-webkit-scrollbar":{display:"none"}},children:Object(l.jsxs)(O.c,{children:[Object(l.jsx)(O.a,{path:"/",element:Object(l.jsx)(v,{id:n})}),Object(l.jsx)(O.a,{path:"/v2ex/hot",element:Object(l.jsx)(C,{id:n})})]})})]})})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,213)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,o=t.getLCP,i=t.getTTFB;n(e),r(e),c(e),o(e),i(e)}))},_=n(32);i.a.createRoot(document.getElementById("root")).render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(s.a,{children:Object(l.jsx)(_.a,{children:Object(l.jsx)(A,{})})})})),E()}},[[207,1,2]]]);
//# sourceMappingURL=main.14fbad7d.chunk.js.map